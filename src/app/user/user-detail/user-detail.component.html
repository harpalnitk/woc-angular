<mat-card *ngIf="user$ | async as user; else loading" class="user-profile">
    <mat-card-header>
      <img mat-card-md-image class="user-profile__image" [src]="getImageURL(user._id)" alt="{{user.alias}}">
      <mat-card-title-group>
      <mat-card-title>{{user.alias}}</mat-card-title>
      <mat-card-subtitle>{{user.firstName}} {{user.lastName}}</mat-card-subtitle>
    </mat-card-title-group>
    </mat-card-header>
    <mat-card-content>
      <mat-list dense>
        <mat-list-item><div fxFlex="30">Alias</div><div fxFlex="70">{{user.alias}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">Email</div><div fxFlex="70">{{user.email}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">First Name</div><div fxFlex="70">{{user.firstName}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">Last Name</div><div fxFlex="70">{{user.lastName}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">Gender</div><div fxFlex="70">{{user.gender}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">Date of Birth</div><div fxFlex="70">{{user.dob | date: 'mediumDate'}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item><div fxFlex="30">Contact</div><div fxFlex="70" style="word-wrap:break-word;">{{user?.contact?.phones | arrayToStringWithDelimiter: ', '}}</div></mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item *ngFor="let line of user?.address?.lines;let i = index">
          <div fxFlex="30">Address Line {{i+1}}:</div><div fxFlex="70">{{line}}</div>
<!--          <span matLine>Address Line {{i+1}}:</span><p matLine style="text-align:center">{{line}}</p>-->
          <mat-divider></mat-divider>
        </mat-list-item>
        <mat-list-item>
          <div fxFlex="30">City</div><div fxFlex="20" style="word-wrap:break-word;">{{user?.address?.city}}</div>
          <div fxFlex="30">State</div><div fxFlex="20" style="word-wrap:break-word;">{{user?.address?.state}}</div>
        </mat-list-item>
        <mat-list-item>
          <div fxFlex="30">Zip</div><div fxFlex="70" style="word-wrap:break-word;">{{user?.address?.zip}}</div>
        </mat-list-item>
        <mat-divider></mat-divider>
      </mat-list>
    </mat-card-content>
    <mat-card-actions align="end" *ngIf="!viewMode">
      <button mat-raised-button color="accent" (click)="editProfile()">EDIT</button>
    </mat-card-actions>

</mat-card>

<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
